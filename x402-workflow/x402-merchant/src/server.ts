/**
 * x402 Merchant Server Entry Point
 */

import app from './app.js';
import { config } from './config/index.js';

const { port } = config.server;
const { address, network, chainId } = config.merchant;

app.listen(port, () => {
  console.log(`
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ðŸª x402 Merchant Server                                  â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  Server:  http://localhost:${port}                           â•‘
â•‘  Wallet:  ${address.slice(0, 10)}...${address.slice(-6)}                     â•‘
â•‘  Network: ${network} (${chainId})                       â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  GET  /health          GET  /api/products                 â•‘
â•‘  GET  /api/products/:id POST /api/buy/:id (x402)          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
`);
});

process.on('SIGTERM', () => { console.log('\n[Server] Shutting down...'); process.exit(0); });
process.on('SIGINT', () => { console.log('\n[Server] Shutting down...'); process.exit(0); });

